<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>Wartungs- &amp; Servicevertrag für LANCOM Router</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon (Tab-Icon) -->
    <link rel="icon" type="image/png" href="../../Logos/logo.png">

    <style>
        :root {
            --primary: #0b74ff;
            --primary-soft: rgba(11, 116, 255, 0.08);
            --bg: #f5f7fb;
            --card-bg: #ffffff;
            --border: #e1e4ec;
            --text-main: #1f2933;
            --text-muted: #6b7280;
            --radius-lg: 14px;
        }

        * { box-sizing: border-box; }

        html, body {
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg);
            color: var(--text-main);
            line-height: 1.6;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        .page {
            max-width: 1100px;
            margin: 2rem auto 3rem;
            padding: 0 1rem;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
            padding: 1.75rem 1.9rem 2.1rem;
            border: 1px solid var(--border);
        }

        /* HEADER / BILD */
        .header {
            margin-bottom: 1.5rem;
        }

        .logo-wrapper {
            width: 100%;
        }

        .logo-wrapper img {
            width: 100%;
            height: auto;
            border-radius: 10px;
            object-fit: cover;
        }

        /* INTRO */
        .intro {
            margin-bottom: 1.75rem;
        }

        .intro h1 {
            font-size: 1.5rem;
            margin: 0 0 0.7rem;
        }

        .intro p {
            margin: 0.4rem 0;
            color: var(--text-main);
            font-size: 0.95rem;
        }

        .intro ul {
            margin: 0.4rem 0 0.6rem 1.1rem;
            padding: 0;
        }

        .intro li {
            margin: 0.15rem 0;
            font-size: 0.95rem;
        }

        /* LEISTUNGEN */
        .leistungen-section {
            margin-top: 1.75rem;
        }

        .leistungen-section h2 {
            margin: 0 0 0.6rem;
            font-size: 1.2rem;
        }

        .leistungen-hint {
            margin: 0 0 0.8rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .leistungen-list {
            display: flex;
            flex-direction: column;
            gap: 0.9rem;
        }

        .leistung {
            border-radius: 12px;
            border: 1px solid var(--border);
            padding: 0.85rem 1rem 0.95rem;
            background: #ffffff;
            box-shadow: 0 4px 12px rgba(15, 23, 42, 0.04);
        }

        .leistung h3 {
            margin: 0 0 0.3rem;
            font-size: 1rem;
        }

        .leistung p {
            margin: 0.1rem 0;
            font-size: 0.9rem;
        }

        .leistung-note {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .legal-box {
            margin-top: 1.1rem;
            padding: 0.7rem 0.9rem;
            border-radius: 10px;
            background: #fff7ed;
            border: 1px solid #fed7aa;
            font-size: 0.9rem;
            color: #7c2d12;
            display: none;
        }

        /* SEKTIONEN */
        .section-divider {
            margin-top: 2rem;
            border-top: 1px solid var(--border);
            padding-top: 1.5rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .section-header h2 {
            margin: 0;
            font-size: 1.2rem;
        }

        .section-header span {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .windparks-wrapper {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 0.7rem;
        }

        .windpark-card {
            border-radius: 12px;
            border: 1px solid var(--border);
            padding: 0.9rem 1rem 1.1rem;
            background: #f9fafb;
        }

        .windpark-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.7rem;
        }

        /* FOOTER */
        footer {
            margin-top: 1.6rem;
            font-size: 0.85rem;
            color: var(--text-muted);
            border-top: 1px solid var(--border);
            padding-top: 0.75rem;
        }

        .footer-buttons {
            display: flex;
            justify-content: center;
            gap: 2.5rem;
            margin-top: 0.2rem;
            margin-bottom: 0.1rem;
        }

        .footer-link {
            font-size: 1.05rem;
            font-weight: 600;
            color: var(--text-muted);
            text-decoration: underline;
            text-underline-offset: 3px;
            cursor: pointer;
        }

        .footer-link:hover {
            color: var(--text-main);
        }

        /* RECHTER ZUSATZ-CONTAINER (vertragsauswertung) */
        .service-card {
            background: #ffffff;
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.08);
            border: 1px solid var(--border);
            padding: 1.25rem 1.4rem 1.5rem;
            font-size: 0.95rem;
            color: var(--text-main);
            max-width: 420px;
        }

        /* SELECTION CONTAINER (wie Info-Container) */
        .selection-card {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
            padding: 1.75rem 1.9rem 2.1rem;
            border: 1px solid var(--border);
            margin-top: 1.5rem;
        }

        /* OVERLAY (vertragsvorlage) */
        #overlay {
            position: fixed;
            inset: 0;
            background: rgba(15, 23, 42, 0.55);
            backdrop-filter: blur(2px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .overlay-hidden {
            display: none !important;
        }

        #vertragsvorlage {
            background: #ffffff;
            width: calc(100% - 3rem);
            max-width: 1000px;
            max-height: calc(100% - 3rem);
            overflow: auto;
            border-radius: var(--radius-lg);
            padding: 1.75rem 2rem;
            box-shadow: 0 18px 45px rgba(15, 23, 42, 0.35);
        }

        @media (max-width: 800px) {
            #vertragsvorlage {
                width: calc(100% - 2rem);
                max-height: calc(100% - 2rem);
                padding: 1.25rem 1.5rem;
            }
        }

        @media (max-width: 600px) {
            .page {
                margin: 1.25rem auto 2rem;
                padding: 0 0.75rem;
            }

            .card, .selection-card {
                padding: 1.25rem 1.1rem 1.8rem;
                border-radius: 12px;
            }

            .logo-wrapper img {
                border-radius: 8px;
            }

            .intro h1 {
                font-size: 1.25rem;
            }

            .footer-buttons {
                gap: 1.8rem;
            }
        }
    </style>
</head>
<body>

<div class="page" id="mainPage">
    <div class="card">

        <!-- Bild / Header -->
        <header class="header">
            <div class="logo-wrapper">
                <img src="../../Logos/logo_name.jpeg" alt="Kevin Strakerjahn Networks &amp; Automation">
            </div>
        </header>

        <!-- Einleitung -->
        <section class="intro">
            <h1>Wartungs- &amp; Servicevertrag für LANCOM Router</h1>

            <p>
                Eine zuverlässige und gut gepflegte Router-Infrastruktur ist entscheidend für den sicheren Betrieb moderner
                Windenergieanlagen. Nachdem die Systeme erfolgreich installiert und in die Parkkommunikation eingebunden wurden,
                gewinnt die kontinuierliche Betreuung dieser Router zunehmend an Bedeutung. Nur durch regelmäßige Wartung,
                Sicherheitsprüfungen und eine klare Dokumentation kann die langfristige Stabilität der gesamten Netzwerkkette
                gewährleistet werden.
            </p>

            <p>
                In vielen Bestandsparks zeigt sich, dass sich Konfigurationsänderungen, Temperatur- und LTE-Schwankungen oder
                veraltete Firmwarestände mit der Zeit spürbar auf die Erreichbarkeit auswirken können. Gleichzeitig erwarten
                Betreiber, Betriebsführer und Servicepartner, dass kritische Netzwerkkomponenten nach aktuellen
                Sicherheitsstandards betrieben und in definierten Intervallen geprüft werden.
            </p>

            <p>
                Mit meinem Wartungs- und Servicekonzept stelle ich sicher, dass die eingesetzten LANCOM-Router dauerhaft stabil
                laufen, sicher konfiguriert sind und bei Bedarf schnell unterstützt werden. Die Kombination aus jährlicher
                technischer Überprüfung, Sicherheitsanalyse, strukturiertem Konfigurationsmanagement sowie koordinierter
                Unterstützung im Störungsfall sorgt dafür, dass die Anlagenkommunikation zuverlässig und zukunftssicher bleibt.
            </p>

            <p>
                Durch diese kontinuierliche Betreuung entsteht ein klar nachvollziehbarer, stabiler und wartbarer
                Betriebszustand des Router-Systems – unabhängig davon, ob sich der Router im Turm, in der Übergabestation
                oder in kundenspezifischen Umgebungen befindet.
            </p>

            <p>
                Der vollständige Leistungsumfang des Wartungsvertrags ist in den folgenden Abschnitten aufgeführt.
            </p>
        </section>

        <!-- Leistungsumfang -->
        <section class="leistungen-section" aria-label="Leistungsumfang Wartungs- &amp; Servicevertrag">
            <h2>Leistungsumfang Wartungs- &amp; Servicevertrag</h2>
            <p class="leistungen-hint">
                Die folgenden Punkte zeigen den Leistungsumfang des Wartungs- und Servicevertrags im Überblick.
            </p>

            <div id="leistungen-list" class="leistungen-list">
                <!-- Inhalte werden per JavaScript aus information/warungsvertrag.txt geladen -->
            </div>

            <div id="legal-box" class="legal-box"></div>
        </section>

        <footer>
            <div class="footer-buttons">
                <a class="footer-link" href="/">Start</a>
                <a class="footer-link" href="/kontakt/">Kontakt</a>
                <a class="footer-link" href="/impressum/">Impressum</a>
                <a class="footer-link" href="/datenschutz/">Datenschutz</a>
            </div>
        </footer>

    </div>

    <!-- Selection Container: vertragsauswahl.html -->
    <div class="selection-card" id="selection" aria-label="Vertragsauswahl">
        <div id="selection-content">
            <!-- vertragsauswahl.html wird hier geladen -->
        </div>
    </div>
</div>

<!-- Rechter Container: vertragsauswertung -->
<div class="service-card" id="vertragsauswertung" aria-label="Vertragsauswertung">
    <div id="vertragsauswertung-content">
        <!-- vertragsauswertung.html wird hier geladen -->
    </div>
</div>

<!-- Overlay: vertragsvorlage (standardmäßig verborgen) -->
<div id="overlay" class="overlay-hidden" aria-hidden="true">
    <div id="vertragsvorlage">
        <!-- vertragsvorlage.html wird hier geladen -->
    </div>
</div>

<script>
    // Leistungsumfang laden
    async function loadRouterEinbauInfo() {
        const listEl = document.getElementById("leistungen-list");
        const legalBox = document.getElementById("legal-box");

        if (!listEl) return;

        try {
            const res = await fetch("information/warungsvertrag.txt");
            if (!res.ok) {
                throw new Error("Fehler beim Laden von information/warungsvertrag.txt (Status " + res.status + ")");
            }

            const data = await res.json();

            if (Array.isArray(data.sections)) {
                data.sections.forEach(section => {
                    const wrapper = document.createElement("div");
                    wrapper.className = "leistung";

                    if (section.heading) {
                        const h = document.createElement("h3");
                        h.textContent = section.heading;
                        wrapper.appendChild(h);
                    }

                    if (section.text) {
                        const p = document.createElement("p");
                        let html = String(section.text);
                        html = html.replace(/\\n/g, "<br>").replace(/\n/g, "<br>");
                        p.innerHTML = html;
                        wrapper.appendChild(p);
                    }

                    if (section.note) {
                        const note = document.createElement("p");
                        note.className = "leistung-note";
                        let html = String(section.note);
                        html = html.replace(/\\n/g, "<br>").replace(/\n/g, "<br>");
                        note.innerHTML = html;
                        wrapper.appendChild(note);
                    }

                    listEl.appendChild(wrapper);
                });
            }

            if (data.legal_notice && legalBox) {
                let html = String(data.legal_notice);
                html = html.replace(/\\n/g, "<br>").replace(/\n/g, "<br>");
                legalBox.innerHTML = html;
                legalBox.style.display = "block";
            }
        } catch (err) {
            console.error(err);
            listEl.innerHTML = "<p>Die Detailbeschreibung zum Leistungsumfang konnte nicht geladen werden. Bitte kontaktieren Sie mich direkt für weitere Informationen.</p>";
        }
    }

    // Flexibles Layout: Hauptcontainer verschiebt/schrumpft, Side wandert ggf. nach unten
    function positionServiceCard() {
        const page = document.querySelector('.page');
        const side = document.querySelector('.service-card');
        if (!page || !side) return;

        const rootFont = parseFloat(getComputedStyle(document.documentElement).fontSize) || 16;
        const gap = 2 * rootFont;                 // 2rem in px
        const MAX_MAIN = 1400;
        const MIN_MAIN = 1000;
        const SIDE_MIN = 280;

        const vw = window.innerWidth;

        let mainW = Math.min(MAX_MAIN, vw - 2*gap);

        if (vw < (MIN_MAIN + SIDE_MIN + 3*gap)) {
            mainW = Math.max(MIN_MAIN, Math.min(MAX_MAIN, vw - 2*gap));
            page.style.width = mainW + "px";
            page.style.marginLeft = "auto";
            page.style.marginRight = "auto";

            side.style.position = "static";
            side.style.left = side.style.right =
            side.style.top = side.style.bottom = "";
            side.style.maxWidth = "none";
            side.style.width = mainW + "px";
            side.style.margin = "1.5rem auto 2rem";
            return;
        }

        const neededForSide = mainW + SIDE_MIN + 3*gap;
        if (vw < neededForSide) {
            mainW = Math.max(MIN_MAIN, vw - (SIDE_MIN + 3*gap));
        }

        page.style.width = mainW + "px";
        page.style.marginLeft = "auto";
        page.style.marginRight = "auto";

        const leftCentered = (vw - mainW) / 2;
        const maxSideLeft = vw - gap - SIDE_MIN;
        const desiredSideLeft = leftCentered + mainW + gap;
        const overflow = desiredSideLeft - maxSideLeft;

        const leftMin = gap;
        const leftFinal = Math.max(leftMin, leftCentered - Math.max(0, overflow));

        page.style.marginLeft = leftFinal + "px";
        page.style.marginRight = "auto";

        side.style.position = "fixed";
        side.style.top = gap + "px";
        side.style.bottom = gap + "px";
        side.style.left = (leftFinal + mainW + gap) + "px";
        side.style.right = gap + "px";
        side.style.width = "";
        side.style.maxWidth = "";
        side.style.margin = "";
    }

    // Externe HTML-Fragmente laden + Script-Tags ausführen
    async function loadSection(targetId, file) {
        const el = document.getElementById(targetId);
        if (!el) return;

        try {
            const res = await fetch(file);
            if (!res.ok) {
                throw new Error("Fehler beim Laden von " + file + " (Status " + res.status + ")");
            }
            const html = await res.text();
            el.innerHTML = html;

            const scripts = el.querySelectorAll("script");
            scripts.forEach(oldScript => {
                const newScript = document.createElement("script");

                if (oldScript.src) {
                    newScript.src = oldScript.src;
                } else {
                    newScript.textContent = oldScript.textContent;
                }

                if (oldScript.type) {
                    newScript.type = oldScript.type;
                }

                document.body.appendChild(newScript);
            });

            return;
        } catch (e) {
            console.error(e);
            el.innerHTML = "<p>Die Inhalte konnten nicht geladen werden. Bitte versuchen Sie es später erneut.</p>";
        }
    }

    // Overlay steuern
    function openOverlay() {
        const ov = document.getElementById("overlay");
        if (ov) ov.classList.remove("overlay-hidden");
    }

    function closeOverlay() {
        const ov = document.getElementById("overlay");
        if (ov) ov.classList.add("overlay-hidden");
    }

    // Init-Platzhalter
    function initVertragsauswertung() { console.log("vertragsauswertung.html wurde geladen"); }
    function initVertragsvorlage() { console.log("vertragsvorlage.html wurde geladen"); }
    function initVertragsauswahl() { console.log("vertragsauswahl.html wurde geladen"); }

    document.addEventListener("DOMContentLoaded", () => {
        loadRouterEinbauInfo();

        loadSection("vertragsauswertung-content", "vertragsauswertung.html")
            .then(() => { if (typeof initVertragsauswertung === "function") initVertragsauswertung(); });

        loadSection("vertragsvorlage", "vertragsvorlage.html")
            .then(() => { if (typeof initVertragsvorlage === "function") initVertragsvorlage(); });

        loadSection("selection-content", "vertragsauswahl.html")
            .then(() => { if (typeof initVertragsauswahl === "function") initVertragsauswahl(); });
    });

    window.addEventListener("load", positionServiceCard);
    window.addEventListener("resize", positionServiceCard);
</script>

</body>
</html>
