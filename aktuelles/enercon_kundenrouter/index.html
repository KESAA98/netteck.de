<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <title>Router-Einbau im ENERCON-Windpark</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon (Tab-Icon) -->
    <link rel="icon" type="image/png" href="../../Logos/logo.png">

    <style>
        :root {
            --primary: #0b74ff;
            --primary-soft: rgba(11, 116, 255, 0.08);
            --bg: #f5f7fb;
            --card-bg: #ffffff;
            --border: #e1e4ec;
            --text-main: #1f2933;
            --text-muted: #6b7280;
            --radius-lg: 14px;
        }

        * { box-sizing: border-box; }

        html, body {
            margin: 0;
            padding: 0;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg);
            color: var(--text-main);
            line-height: 1.6;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        .page {
            max-width: 1100px;
            margin: 2rem auto 3rem;
            padding: 0 1rem;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--radius-lg);
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
            padding: 1.75rem 1.9rem 2.1rem;
            border: 1px solid var(--border);
        }

        /* HEADER / BILD */
        .header {
            margin-bottom: 1.5rem;
        }

        .logo-wrapper {
            width: 100%;
        }

        .logo-wrapper img {
            width: 100%;
            height: auto;
            border-radius: 10px;
            object-fit: cover;
        }

        /* INTRO */
        .intro {
            margin-bottom: 1.75rem;
        }

        .intro h1 {
            font-size: 1.5rem;
            margin: 0 0 0.7rem;
        }

        .intro p {
            margin: 0.4rem 0;
            color: var(--text-main);
            font-size: 0.95rem;
        }

        .intro ul {
            margin: 0.4rem 0 0.6rem 1.1rem;
            padding: 0;
        }

        .intro li {
            margin: 0.15rem 0;
            font-size: 0.95rem;
        }

        /* LEISTUNGEN */
        .leistungen-section {
            margin-top: 1.75rem;
        }

        .leistungen-section h2 {
            margin: 0 0 0.6rem;
            font-size: 1.2rem;
        }

        .leistungen-hint {
            margin: 0 0 0.8rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .leistungen-list {
            display: flex;
            flex-direction: column;
            gap: 0.9rem;
        }

        .leistung {
            border-radius: 10px;
            border: 1px solid var(--border);
            padding: 0.75rem 0.9rem 0.85rem;
            background: #f9fafb;
            border-left: 3px solid var(--primary-soft);
        }

        .leistung h3 {
            margin: 0 0 0.3rem;
            font-size: 1rem;
        }

        .leistung p {
            margin: 0.1rem 0;
            font-size: 0.9rem;
        }

        .leistung-note {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .legal-box {
            margin-top: 1.1rem;
            padding: 0.7rem 0.9rem;
            border-radius: 10px;
            background: #fff7ed;
            border: 1px solid #fed7aa;
            font-size: 0.9rem;
            color: #7c2d12;
            display: none;
        }

        /* SEKTIONEN */
        .section-divider {
            margin-top: 2rem;
            border-top: 1px solid var(--border);
            padding-top: 1.5rem;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .section-header h2 {
            margin: 0;
            font-size: 1.2rem;
        }

        .section-header span {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* FORMULAR ALLGEMEIN */
        form.router-form {
            display: flex;
            flex-direction: column;
            gap: 1.4rem;
            margin-top: 1rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.9rem 1.2rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .form-group label {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .form-group span.required {
            color: #b91c1c;
            margin-left: 0.2rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            border-radius: 8px;
            border: 1px solid var(--border);
            padding: 0.45rem 0.55rem;
            font-size: 0.9rem;
            font-family: inherit;
            outline: none;
            background: #ffffff;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 1px rgba(11, 116, 255, 0.12);
        }

        textarea {
            min-height: 90px;
            resize: vertical;
        }

        .form-note {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .checkbox-row {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            font-size: 0.85rem;
        }

        .checkbox-row input[type="checkbox"] {
            margin-top: 0.15rem;
        }

        .submit-row {
            margin-top: 0.6rem;
        }

        .btn-primary {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.55rem 1.3rem;
            border-radius: 999px;
            border: none;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            background: var(--primary);
            color: #ffffff;
            transition: background 0.12s ease, transform 0.06s ease;
        }

        .btn-primary:hover {
            background: #075ad1;
            transform: translateY(-1px);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary,
        .btn-text {
            border-radius: 999px;
            border: 1px solid var(--border);
            background: #ffffff;
            font-size: 0.9rem;
            padding: 0.4rem 0.9rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
        }

        .btn-secondary:hover {
            border-color: var(--primary);
        }

        .btn-text {
            border: none;
            padding: 0.2rem 0.4rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .btn-text:hover {
            color: var(--text-main);
        }

        /* WINDPARK-KARTEN */
        .windparks-wrapper {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 0.7rem;
        }

        .windpark-card {
            border-radius: 12px;
            border: 1px solid var(--border);
            padding: 0.9rem 1rem 1.1rem;
            background: #f9fafb;
        }

        .windpark-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.7rem;
        }

        .windpark-card-header h3 {
            margin: 0;
            font-size: 1rem;
        }

        /* FOOTER */
        footer {
            margin-top: 1.6rem;
            font-size: 0.85rem;
            color: var(--text-muted);
            border-top: 1px solid var(--border);
            padding-top: 0.75rem;
        }

        .footer-buttons {
            display: flex;
            justify-content: center;
            gap: 2.5rem;
            margin-top: 0.2rem;
            margin-bottom: 0.1rem;
        }

        .footer-link {
            font-size: 1.05rem;
            font-weight: 600;
            color: var(--text-muted);
            text-decoration: underline;
            text-underline-offset: 3px;
            cursor: pointer;
        }

        .footer-link:hover {
            color: var(--text-main);
        }

        /* MOBILE */
        @media (max-width: 800px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 600px) {
            .page {
                margin: 1.25rem auto 2rem;
                padding: 0 0.75rem;
            }

            .card {
                padding: 1.25rem 1.1rem 1.8rem;
                border-radius: 12px;
            }

            .logo-wrapper img {
                border-radius: 8px;
            }

            .intro h1 {
                font-size: 1.25rem;
            }

            .footer-buttons {
                gap: 1.8rem;
            }
        }
    </style>
</head>
<body>

<div class="page">
    <div class="card">

        <!-- Bild / Header -->
        <header class="header">
            <div class="logo-wrapper">
                <img src="../../Logos/logo_name.jpeg" alt="Kevin Strakerjahn Networks &amp; Automation">
            </div>
        </header>

        <!-- Einleitung -->
        <section class="intro">
            <h1>Router-Einbau im ENERCON-Windpark</h1>

            <p>
                Eine stabile und klar strukturierte Netzwerkverbindung ist entscheidend für den sicheren Betrieb
                moderner Windenergieanlagen. Viele Bestandsanlagen verfügen jedoch noch über ältere Router,
                gewachsene Verkabelungen oder nicht mehr zeitgemäße Konfigurationen. Damit Betreiber und
                Servicepartner zuverlässig auf die Anlagen zugreifen können, ist eine professionelle Modernisierung
                der Router-Infrastruktur erforderlich.
            </p>

            <p>
                In vielen Windparks entsteht dieser Bedarf, weil ENERCON bei älteren Anlagen inzwischen erwartet
                bzw. vorgibt, dass der Betreiber einen eigenen Router bereitstellt und fachgerecht installieren lässt.
                Hintergrund ist, dass zahlreiche Altanlagen noch mit Kommunikationslösungen ausgestattet sind, die
                heutigen Sicherheits- und Verfügbarkeitsanforderungen nicht mehr entsprechen.
            </p>

            <p>
                Ich übernehme die vollständige Installation und Einrichtung solcher Kundenrouter in
                ENERCON-Windkraftanlagen – sowohl im Turm als auch in der Übergabestation. Die Umsetzung basiert
                auf einer klar definierten technischen Struktur, die speziell auf die typischen Netzwerkarchitekturen
                in ENERCON-Windparks abgestimmt ist.
            </p>

            <p>Zum Einsatz kommen ausschließlich industrietaugliche, praxiserprobte Komponenten:</p>

            <ul>
                <li>LANCOM 1800VA-4G – Router für sichere VPN-Anbindung, Routing und Standortvernetzung</li>
                <li>Eaton Ellipse PRO / ECO oder vergleichbare USV – Schutz vor Spannungsschwankungen und Ausfällen</li>
                <li>IP54-Montagegehäuse für einen geschützten und sauberen Einbau im Turm oder der Übergabestation</li>
                <li>Strukturierte Verkabelung mit klar beschrifteten und genormten Übergabepunkten</li>
            </ul>

            <p>
                Durch die Kombination aus vorkonfigurierter Hardware, standardisiertem Schaltschrankaufbau und einer
                sauberen Integration in die vorhandene Infrastruktur entsteht ein stabiles, wartbares und
                zukunftssicheres Kommunikationssystem für den gesamten Windpark.
            </p>

            <p>
                Das vollständige Leistungsverzeichnis finden Sie direkt unter diesem Abschnitt.
            </p>
        </section>

        <!-- Leistungsumfang (aus information/router_einbau.txt) -->
        <section class="leistungen-section" aria-label="Leistungsumfang Router-Einbau">
            <h2>Leistungsumfang Router-Einbau</h2>
            <p class="leistungen-hint">
                Die folgenden Punkte beschreiben den typischen Ablauf von der Bestandsaufnahme bis zur Übergabe
                der fertigen Lösung. Details können je nach Windpark und Infrastruktur angepasst werden.
            </p>

            <div id="leistungen-list" class="leistungen-list">
                <!-- Inhalte werden per JavaScript aus information/router_einbau.txt geladen -->
            </div>

            <div id="legal-box" class="legal-box"></div>
        </section>

        <!-- Formular: Windparks -->
        <section class="section-divider" aria-label="Windparks für Router-Einbau">
            <div class="section-header">
                <h2>Windparks für die Angebotsanfrage</h2>
                <span>Tragen Sie hier alle Windparks ein, für die ein Router-Einbau geplant ist.</span>
            </div>

            <form
                name="router-einbau-anfrage"
                method="POST"
                data-netlify="true"
                class="router-form"
            >
                <!-- Netlify-Form-Name -->
                <input type="hidden" name="form-name" value="router-einbau-anfrage">

                <!-- Windpark-Liste -->
                <div class="windparks-wrapper" id="windparks-container">
                    <!-- Wird per JS befüllt -->
                </div>

                <div>
                    <button type="button" class="btn-secondary" id="add-windpark-btn">
                        + weiteren Windpark hinzufügen
                    </button>
                    <div class="form-note">
                        Jeder Eintrag entspricht einem Windpark mit eigenem Betreiber bzw. Ansprechpartner.
                    </div>
                </div>

                <!-- Zusatzsysteme -->
                <div class="form-group">
                    <label for="zusatzsysteme">
                        Zusatzsysteme, die Internet benötigen (z.&#8239;B. BNK, Kameras, Fernwirktechnik)
                    </label>
                    <textarea
                        id="zusatzsysteme"
                        name="zusatzsysteme"
                        placeholder="Bitte nennen Sie hier weitere Systeme, die über den Router angebunden werden sollen."
                    ></textarea>
                </div>

                <!-- Kontaktdaten Anfragender -->
                <div class="section-divider" aria-label="Kontaktdaten für Rückfragen">
                    <div class="section-header">
                        <h2>Kontaktdaten für Rückfragen und Angebot</h2>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="anfrager_name">Name des Anfragenden<span class="required">*</span></label>
                            <input type="text" id="anfrager_name" name="anfrager_name" required>
                        </div>

                        <div class="form-group">
                            <label for="anfrager_firma">Firma / Organisation<span class="required">*</span></label>
                            <input type="text" id="anfrager_firma" name="anfrager_firma" required>
                        </div>

                        <div class="form-group">
                            <label for="anfrager_email">E-Mail<span class="required">*</span></label>
                            <input type="email" id="anfrager_email" name="anfrager_email" required>
                        </div>

                        <div class="form-group">
                            <label for="anfrager_telefon">Telefon</label>
                            <input type="tel" id="anfrager_telefon" name="anfrager_telefon">
                        </div>
                    </div>
                </div>

                <!-- WES-Kunde + WP-Nummern -->
                <div class="section-divider" aria-label="Angaben zur technischen Betriebsführung">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="wes_kunde">
                                WES Technische Betriebsführung GmbH – Kunde?<span class="required">*</span>
                            </label>
                            <select id="wes_kunde" name="wes_kunde" required>
                                <option value="">Bitte auswählen …</option>
                                <option value="ja">Ja, wir sind Kunde der WES Technische Betriebsführung GmbH</option>
                                <option value="nein">Nein</option>
                            </select>
                            <div class="form-note">
                                Diese Angabe hilft bei der Abstimmung mit der technischen Betriebsführung.
                            </div>
                        </div>

                        <div class="form-group" id="wes_details_group" style="display:none;">
                            <label for="wes_wp_ids">WP-Nummern / Park-IDs (falls bekannt)</label>
                            <textarea
                                id="wes_wp_ids"
                                name="wes_wp_ids"
                                placeholder="z.&#8239;B. WP03, WP07, interne Park-IDs oder WES-Kundennummern."
                            ></textarea>
                            <div class="form-note">
                                Optional, aber hilfreich für eine eindeutige Zuordnung in bestehenden Systemen.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Checkbox WES IBS -->
                <div class="form-group">
                    <div class="checkbox-row">
                        <input type="checkbox" id="wes_ibs_checkbox" name="wes_ibs_checkbox" required>
                        <label for="wes_ibs_checkbox">
                            Mindestens eine der angegebenen Anlagen befindet sich in der technischen
                            Betriebsführung der WES IBS Betriebsführung GmbH.
                        </label>
                    </div>
                    <div class="form-note">
                        Falls dies nicht zutrifft, können Sie diese Checkbox deaktivieren und im Freitext
                        weitere Informationen zur Betriebsführung ergänzen.
                    </div>
                </div>

                <!-- Datenschutz -->
                <div class="form-group">
                    <div class="checkbox-row">
                        <input type="checkbox" id="datenschutz" name="datenschutz" required>
                        <label for="datenschutz">
                            Ich willige ein, dass meine Anfrage-Daten zur Bearbeitung gespeichert und
                            ggf. an WES Technische Betriebsführung GmbH weitergegeben werden, sofern dies
                            für die Angebotserstellung erforderlich ist.
                        </label>
                    </div>
                    <div class="form-note">
                        Hinweise zum Umgang mit Ihren Daten finden Sie in der Datenschutzerklärung.
                    </div>
                </div>

                <!-- Absenden -->
                <div class="submit-row">
                    <button type="submit" class="btn-primary">
                        Anfrage für Router-Einbau absenden
                    </button>
                </div>
            </form>
        </section>

        <footer>
            <div class="footer-buttons">
                <a class="footer-link" href="/">Start</a>
                <a class="footer-link" href="/kontakt/">Kontakt</a>
                <a class="footer-link" href="/impressum/">Impressum</a>
                <a class="footer-link" href="/datenschutz/">Datenschutz</a>
            </div>
        </footer>

    </div>
</div>

<script>
    // Leistungsumfang laden
    async function loadRouterEinbauInfo() {
        const listEl = document.getElementById("leistungen-list");
        const legalBox = document.getElementById("legal-box");

        if (!listEl) return;

        try {
            const res = await fetch("information/router_einbau.txt");
            if (!res.ok) {
                throw new Error("Fehler beim Laden von information/router_einbau.txt (Status " + res.status + ")");
            }

            const data = await res.json();

            if (Array.isArray(data.sections)) {
                data.sections.forEach(section => {
                    const wrapper = document.createElement("div");
                    wrapper.className = "leistung";

                    if (section.heading) {
                        const h = document.createElement("h3");
                        h.textContent = section.heading;
                        wrapper.appendChild(h);
                    }

                    if (section.text) {
                        const p = document.createElement("p");
                        p.textContent = section.text;
                        wrapper.appendChild(p);
                    }

                    if (section.note) {
                        const note = document.createElement("p");
                        note.className = "leistung-note";
                        note.textContent = section.note;
                        wrapper.appendChild(note);
                    }

                    listEl.appendChild(wrapper);
                });
            }

            if (data.legal_notice && legalBox) {
                legalBox.textContent = data.legal_notice;
                legalBox.style.display = "block";
            }
        } catch (err) {
            console.error(err);
            listEl.innerHTML = "<p>Die Detailbeschreibung zum Leistungsumfang konnte nicht geladen werden. Bitte kontaktieren Sie mich direkt für weitere Informationen.</p>";
        }
    }

    // Dynamische Windpark-Karten
    function initWindparks() {
        const container = document.getElementById("windparks-container");
        const addBtn = document.getElementById("add-windpark-btn");
        if (!container || !addBtn) return;

        let index = 0;

        function createWindparkCard(i) {
            const card = document.createElement("div");
            card.className = "windpark-card";
            card.dataset.index = String(i);

            card.innerHTML = `
                <div class="windpark-card-header">
                    <h3>Windpark ${i}</h3>
                    <button type="button" class="btn-text remove-windpark" ${i === 1 ? 'style="display:none;"' : ""}>
                        entfernen
                    </button>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="windpark_${i}_name">Windpark / Standort<span class="required">*</span></label>
                        <input type="text" id="windpark_${i}_name" name="windpark_${i}_name" required>
                    </div>
                    <div class="form-group">
                        <label for="windpark_${i}_betreiber">Betreiber-Firma<span class="required">*</span></label>
                        <input type="text" id="windpark_${i}_betreiber" name="windpark_${i}_betreiber" required>
                    </div>
                    <div class="form-group">
                        <label for="windpark_${i}_anzahl_anlagen">Anzahl Anlagen<span class="required">*</span></label>
                        <input type="number" id="windpark_${i}_anzahl_anlagen" name="windpark_${i}_anzahl_anlagen" min="1" step="1" required>
                    </div>
                    <div class="form-group">
                        <label for="windpark_${i}_geschaeftsfuehrer">Geschäftsführer / Verantwortliche Person</label>
                        <input type="text" id="windpark_${i}_geschaeftsfuehrer" name="windpark_${i}_geschaeftsfuehrer">
                    </div>
                    <div class="form-group">
                        <label for="windpark_${i}_email">E-Mail des Betreibers</label>
                        <input type="email" id="windpark_${i}_email" name="windpark_${i}_email">
                    </div>
                    <div class="form-group">
                        <label for="windpark_${i}_internet">Internet-Anbindung vor Ort</label>
                        <select id="windpark_${i}_internet" name="windpark_${i}_internet">
                            <option value="">Bitte auswählen …</option>
                            <option value="lte">LTE</option>
                            <option value="glasfaser">Glasfaser</option>
                            <option value="dsl">DSL</option>
                            <option value="unbekannt">Unbekannt / muss geprüft werden</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" style="margin-top:0.5rem;">
                    <label for="windpark_${i}_hinweise">Besondere Hinweise zu diesem Windpark</label>
                    <textarea
                        id="windpark_${i}_hinweise"
                        name="windpark_${i}_hinweise"
                        placeholder="z.&#8239;B. eingeschränkter Zugang, spezielle Schaltzeiten, bestehende Router oder USV, Besonderheiten im Übergabeschrank …"
                    ></textarea>
                </div>
            `;

            return card;
        }

        function addWindpark() {
            index += 1;
            const card = createWindparkCard(index);
            container.appendChild(card);
        }

        addBtn.addEventListener("click", () => {
            addWindpark();
        });

        container.addEventListener("click", (event) => {
            const target = event.target;
            if (target && target.classList.contains("remove-windpark")) {
                const card = target.closest(".windpark-card");
                if (card) {
                    container.removeChild(card);
                }
            }
        });

        // Mindestens ein Windpark vorbefüllen
        addWindpark();
    }

    // WES-Kunde: WP-IDs Feld ein-/ausblenden
    function initWesToggle() {
        const select = document.getElementById("wes_kunde");
        const group = document.getElementById("wes_details_group");
        const textarea = document.getElementById("wes_wp_ids");

        if (!select || !group) return;

        function update() {
            if (select.value === "ja") {
                group.style.display = "";
            } else {
                group.style.display = "none";
                if (textarea) textarea.value = "";
            }
        }

        select.addEventListener("change", update);
        update();
    }

    document.addEventListener("DOMContentLoaded", () => {
        loadRouterEinbauInfo();
        initWindparks();
        initWesToggle();
    });
</script>

</body>
</html>
